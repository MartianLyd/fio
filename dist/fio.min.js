/*!
 * ====================================================
 * Front-end Input and Output Solution - v1.0.0 - 2014-07-17
 * https://github.com/fex-team/fio
 * GitHub: https://github.com/fex-team/fio.git 
 * Copyright (c) 2014 Baidu FEX; Licensed BSD
 * ====================================================
 */
!function(){function a(a,b){this.id=a,this.username=b}function b(a){this.content=a,this.type=a instanceof Blob?f.file.TYPE_BLOB:"string"==typeof a?f.file.TYPE_TEXT:"object"==typeof a?f.file.TYPE_JSON:f.file.TYPE_UNKNOWN}function c(a){this.setPath(a),this.isDir=!1,this.data=null,this.size=0,this.createTime=new Date,this.modifyTime=new Date}function d(a,b,c){this.user=a,this.file=b,this.access=c||0}function e(a,b,c){this.path=a,this.method=b,this.user=c,this.dupPolicy=f.file.DUP_FAIL,this.newPath=null,this.acl=null,this.extra=null}var f={version:"1.0"};f.provider={},f.file={},f.user={};var g=function(){},h={},i=null,j={current:g,login:g,logout:g};c.prototype.setPath=function(){},f.user.User=a,f.file.Data=b,f.file.File=c,f.file.Acl=d,f.file.FileRequest=e,f.file.TYPE_TEXT="text",f.file.TYPE_JSON="json",f.file.TYPE_BLOB="blob",f.file.TYPE_UNKNOWN="unknown",f.file.METHOD_READ="read",f.file.METHOD_WRITE="write",f.file.METHOD_LIST="list",f.file.METHOD_MOVE="move",f.file.METHOD_DELETE="delete",f.file.METHOD_MKDIR="mkdir",f.file.METHOD_ACL_READ="readAcl",f.file.METHOD_ACL_WRITE="writeAcl",f.file.DUP_OVERWRITE="overwrite",f.file.DUP_FAIL="fail",f.file.DUP_RENAME="rename",f.file.ACCESS_PUBLIC=1,f.file.ACCESS_READ=2,f.file.ACCESS_WRITE=4,f.file.ACCESS_CREATE=8,f.file.ACCESS_DELETE=16,f.file.ACCESS_ACL_READ=32,f.file.ACCESS_ACL_WRITE=64,f.file.ACCESS_ALL=65534,f.provider.register=function(a,b){if(h[a]=b,i||(i=b),"function"!=typeof b.handle)throw new Error("Not implement: provider.handle()")},f.provider.use=function(a){i=h[a]},f.provider.init=function(a,b){var c=h[a];return c&&"function"==typeof c.init?c.init.call(c,b):null},f.user.impl=function(a){j=a},f.user.current=function(){return j.current.apply(j,arguments)},f.user.login=function(){return j.login.apply(j,arguments)},f.user.logout=function(){return j.logout.apply(j,arguments)},["read","write","list","move","delete","mkdir","readAcl","writeAcl"].forEach(function(a){f.file[a]=function(b){var c=b.provider?h[b.provider]:i,d=new e(b.path,a,f.user.current());return"write"==a&&(d.dupPolicy=b.ondup,d.data=new f.file.Data(b.content),delete b.ondup),"move"==a&&(d.newPath=b.newPath,delete b.newPath),"writeAcl"==a&&(d.acl=b.acl,delete b.acl),delete b.provider,delete b.path,d.extra=b,c.handle(d)}}),window.fio=f}(Promise);